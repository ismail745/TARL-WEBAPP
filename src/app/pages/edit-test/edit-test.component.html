<div class="min-h-screen py-10 px-6 bg-gradient-to-br from-blue-50 to-indigo-100">
  <div *ngIf="loading" class="flex justify-center items-center h-64">
    <div class="animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"></div>
  </div>
  <div *ngIf="errorMessage" class="max-w-5xl mx-auto mb-6 bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl">
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="max-w-5xl mx-auto mb-6 bg-green-50 border border-green-200 text-green-700 px-6 py-4 rounded-xl">
    {{ successMessage }}
  </div>

  <form *ngIf="test && !loading" (ngSubmit)="saveChanges()" class="max-w-5xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-blue-100">
    <div class="px-8 py-6 bg-gradient-to-r from-blue-600 to-indigo-600">      <h1 class="text-3xl font-bold text-white">{{ getTranslation('editTest') }}</h1>
    </div>

    <div class="p-8 space-y-10">
      
      <section class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
          <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          {{ getTranslation('title') }}
        </h2>

        <div class="space-y-6">
          <div>            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('title') }} ({{ getTranslation('langArabic') }})</label>
            <input [(ngModel)]="test.title.ar" name="titleAr" 
                   [placeholder]="getTranslation('enterSolution')"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white">
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('description') }} ({{ getTranslation('langArabic') }})</label>            <textarea [(ngModel)]="test.description.ar" name="descriptionAr" rows="3" 
                      [placeholder]="getTranslation('enterSolution')"
                      class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white resize-none"></textarea>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('class') }}</label>
            <input [(ngModel)]="test.class" name="class" 
                   placeholder="Class name"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white">
          </div>
          <div class="flex items-center space-x-3">
            <input type="checkbox" [(ngModel)]="test.isActive" name="isActive" 
                   class="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
            <label for="isActive" class="text-sm font-medium text-gray-700">Test is active</label>
          </div>
        </div>
      </section>

      
      <section *ngIf="test.findcomposition" class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
          <svg class="w-6 h-6 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
          </svg>          {{ getTranslation('findComposition') }}
        </h2>

        <div class="flex bg-white rounded-lg p-1 mb-6 border border-green-200">
          <button (click)="changeActiveLevel('findcomposition', 'easy')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-green-500 text-white shadow-md': activeFindCompLevel === 'easy',
                    'text-gray-600 hover:text-green-600 hover:bg-green-50': activeFindCompLevel !== 'easy'
                  }"
                  type="button">{{ getTranslation('easy') }}</button>
          <button (click)="changeActiveLevel('findcomposition', 'medium')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-green-500 text-white shadow-md': activeFindCompLevel === 'medium',
                    'text-gray-600 hover:text-green-600 hover:bg-green-50': activeFindCompLevel !== 'medium'
                  }"
                  type="button">{{ getTranslation('medium') }}</button>
          <button (click)="changeActiveLevel('findcomposition', 'hard')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-green-500 text-white shadow-md': activeFindCompLevel === 'hard',
                    'text-gray-600 hover:text-green-600 hover:bg-green-50': activeFindCompLevel !== 'hard'
                  }"
                  type="button">{{ getTranslation('hard') }}</button>
        </div>

        <div [ngSwitch]="activeFindCompLevel" class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>              <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('time') }}</label>
              <input type="number"
                     [(ngModel)]="test.findcomposition[activeFindCompLevel].time"
                     [name]="'findCompTime' + activeFindCompLevel"
                     placeholder="60"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('attempts') }}</label>
              <input type="number"
                     [(ngModel)]="test.findcomposition[activeFindCompLevel].attemptsAllowed"
                     [name]="'findCompAttempts' + activeFindCompLevel"
                     placeholder="3"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('number') }}</label>
            <input type="number"
                   [(ngModel)]="test.findcomposition[activeFindCompLevel].number"
                   [name]="'findCompNumber' + activeFindCompLevel"
                   placeholder="10"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white">
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('solution') }} ({{ getTranslation('enterSolution') }})</label>
            <input [(ngModel)]="findCompSolutionString"
                   (ngModelChange)="onFindCompSolutionChange($event)"
                   [name]="'findCompSolution' + activeFindCompLevel"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white"
                   placeholder="5, 5 or 3, 7">
          </div>
        </div>
      </section>

      
      <section *ngIf="test.WritetheFollowingNumberinLetters" class="bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl p-6 border border-purple-100">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
          <svg class="w-6 h-6 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
          </svg>          {{ getTranslation('writeNumber') }}
        </h2>
        
        <div class="flex bg-white rounded-lg p-1 mb-6 border border-purple-200">
          <button (click)="changeActiveLevel('WritetheFollowingNumberinLetters', 'easy')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-purple-500 text-white shadow-md': activeWriteNumLevel === 'easy',
                    'text-gray-600 hover:text-purple-600 hover:bg-purple-50': activeWriteNumLevel !== 'easy'
                  }"
                  type="button">{{ getTranslation('easy') }}</button>
          <button (click)="changeActiveLevel('WritetheFollowingNumberinLetters', 'medium')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-purple-500 text-white shadow-md': activeWriteNumLevel === 'medium',
                    'text-gray-600 hover:text-purple-600 hover:bg-purple-50': activeWriteNumLevel !== 'medium'
                  }"
                  type="button">{{ getTranslation('medium') }}</button>
          <button (click)="changeActiveLevel('WritetheFollowingNumberinLetters', 'hard')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-purple-500 text-white shadow-md': activeWriteNumLevel === 'hard',
                    'text-gray-600 hover:text-purple-600 hover:bg-purple-50': activeWriteNumLevel !== 'hard'
                  }"
                  type="button">{{ getTranslation('hard') }}</button>
        </div>

        <div [ngSwitch]="activeWriteNumLevel" class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('time') }}</label>
              <input type="number"
                     [(ngModel)]="test.WritetheFollowingNumberinLetters[activeWriteNumLevel].time"
                     [name]="'writeNumTime' + activeWriteNumLevel"
                     placeholder="90"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('attempts') }}</label>
              <input type="number"
                     [(ngModel)]="test.WritetheFollowingNumberinLetters[activeWriteNumLevel].attemptsAllowed"
                     [name]="'writeNumAttempts' + activeWriteNumLevel"
                     placeholder="3"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('number') }}</label>
            <input type="number"
                   [(ngModel)]="test.WritetheFollowingNumberinLetters[activeWriteNumLevel].number"
                   [name]="'writeNumNumber' + activeWriteNumLevel"
                   placeholder="25"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white">
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">{{ getTranslation('solution') }} ({{ getTranslation('enterSolution') }})</label>
            <input [(ngModel)]="writeNumberSolutionString"
                   (ngModelChange)="onWriteNumberSolutionChange($event)"
                   [name]="'writeNumSolution' + activeWriteNumLevel"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white"
                   placeholder="twenty, five">
          </div>
        </div>
      </section>

      
      <section *ngIf="test.IdentifthUnitsTensHundredsandThousands" class="bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-6 border border-orange-100">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
          <svg class="w-6 h-6 mr-2 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
          </svg>
          Place Value Identification
        </h2>
        
        <div class="flex bg-white rounded-lg p-1 mb-6 border border-orange-200">
          <button (click)="changeActiveLevel('IdentifthUnitsTensHundredsandThousands', 'easy')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-orange-500 text-white shadow-md': activePlaceValueLevel === 'easy',
                    'text-gray-600 hover:text-orange-600 hover:bg-orange-50': activePlaceValueLevel !== 'easy'
                  }"
                  type="button">Easy</button>
          <button (click)="changeActiveLevel('IdentifthUnitsTensHundredsandThousands', 'medium')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-orange-500 text-white shadow-md': activePlaceValueLevel === 'medium',
                    'text-gray-600 hover:text-orange-600 hover:bg-orange-50': activePlaceValueLevel !== 'medium'
                  }"
                  type="button">Medium</button>
          <button (click)="changeActiveLevel('IdentifthUnitsTensHundredsandThousands', 'hard')"
                  class="flex-1 px-4 py-2 font-medium text-sm rounded-md transition-all duration-200"
                  [ngClass]="{
                    'bg-orange-500 text-white shadow-md': activePlaceValueLevel === 'hard',
                    'text-gray-600 hover:text-orange-600 hover:bg-orange-50': activePlaceValueLevel !== 'hard'
                  }"
                  type="button">Hard</button>
        </div>

        <div [ngSwitch]="activePlaceValueLevel" class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">Time (seconds)</label>
              <input type="number"
                     [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].time"
                     [name]="'placeValueTime' + activePlaceValueLevel"
                     placeholder="120"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">Attempts Allowed</label>
              <input type="number"
                     [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].attemptsAllowed"
                     [name]="'placeValueAttempts' + activePlaceValueLevel"
                     placeholder="3"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-gray-700">Number</label>
            <input type="number"
                   [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].number"
                   [name]="'placeValueNumber' + activePlaceValueLevel"
                   placeholder="1234"
                   class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
          </div>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">Units</label>
              <input type="number"
                     [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].solution.units"
                     [name]="'placeValueUnits' + activePlaceValueLevel"
                     placeholder="4"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">Tens</label>
              <input type="number"
                     [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].solution.tens"
                     [name]="'placeValueTens' + activePlaceValueLevel"
                     placeholder="3"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">Hundreds</label>
              <input type="number"
                     [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].solution.hundreds"
                     [name]="'placeValueHundreds' + activePlaceValueLevel"
                     placeholder="2"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-700">Thousands</label>
              <input type="number"
                     [(ngModel)]="test.IdentifthUnitsTensHundredsandThousands[activePlaceValueLevel].solution.thousands"
                     [name]="'placeValueThousands' + activePlaceValueLevel"
                     placeholder="1"
                     class="w-full rounded-xl border border-gray-300 px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white">
            </div>
          </div>
        </div>
      </section>

      <div class="flex justify-end space-x-4 mt-8">
        <button type="button" (click)="backToTests()" 
                class="px-8 py-3 rounded-xl text-gray-700 font-semibold shadow-lg transition-all duration-200 bg-gray-100 hover:bg-gray-200 border border-gray-300 hover:shadow-xl transform hover:scale-105">
          Cancel
        </button>
        <button type="submit" [disabled]="loading"
                class="px-8 py-3 rounded-xl text-white font-semibold shadow-lg transition-all duration-200 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
          Save Changes
        </button>
      </div>
    </div>
  </form>
</div>